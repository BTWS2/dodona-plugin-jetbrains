plugins {
    id 'de.fuerstenau.buildconfig' version '1.1.8'
    id 'idea'
    id 'java'
    id 'org.jetbrains.intellij' version '0.3.10'
}

group 'be.ugent.piedcler.dodona'
version '1.3.7-SNAPSHOT'

sourceCompatibility = 1.8

buildConfig {
    appName 'ugent-dodona'
    version = project.version
    packageName = 'be.ugent.piedcler.dodona.plugin'
    clsName = 'BuildConfig'
}

intellij {
    version ideaVersion
    pluginName 'ugent-dodona'
    updateSinceUntilBuild false
    if (customIde == 'true') {
        alternativeIdePath customIdePath
    }
}

repositories {
    mavenCentral()

    maven {
        url "https://dl.bintray.com/thepieterdc/dodona-api-java"
    }

    if (customIde == 'true') {
        flatDir {
            dirs "$customIdePath/lib"
        }
    }
}

dependencies {
    compile group: 'io.github.thepieterdc.dodona', name: 'dodona-api-interface', version: '1.3.1'
    runtime group: 'io.github.thepieterdc.dodona', name: 'dodona-api-impl', version: '1.3.1'

    if (customIde == 'true') {
        compileOnly name: customIdeName
    }
}

patchPluginXml {
    version project.version
}

plugins {
    id 'idea'
    id 'java'
    id 'org.jetbrains.intellij' version '0.3.10'
}

group 'be.ugent.piedcler.dodona'
version '1.0.0-SNAPSHOT'

sourceCompatibility = 1.8

def hasPyCharm = project.hasProperty('pycharmPath')

intellij {
    version ideaVersion
    pluginName 'ugent-dodona'
    updateSinceUntilBuild false
    if (hasPyCharm){
        alternativeIdePath pycharmPath
    }else{
        plugins += [pythonPlugin]
    }
}

repositories {
    mavenCentral()
    if (hasPyCharm){
        flatDir {
            dirs "$pycharmPath/lib"
        }
    }
}

dependencies {
    compile group: 'com.fasterxml.jackson.core', name: 'jackson-annotations', version: '2.9.6'
    compile group: 'com.fasterxml.jackson.core', name: 'jackson-core', version: '2.9.6'
    compile group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: '2.9.6'
    if (hasPyCharm){
        compileOnly name: 'pycharm'
    }
}

patchPluginXml {
    version project.version
}
